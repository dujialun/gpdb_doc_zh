<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1" xml:lang="en">
  <title id="kh138244">配置Greenplum数据库系统</title>
  <shortdesc>Greenplum数据库可以使用服务器配置参数进行配置。</shortdesc>
  <body>
    <p>服务器配置参数会影响Greenplum数据库的行为。它们是PostgreSQL的“大统一配置”系统的一部分，因此它们有时
      也被称为“GUC”。大部分的Greenplum数据库服务器配置参数和PostgreSQL的配置参数相同，但是也有一些是
      Greenplum所特有的。</p>
  </body>
  <topic id="topic2" xml:lang="en">
    <title id="kh155018">关于Greenplum数据库的Master参数和本地参数</title>
    <shortdesc>服务器配置参数可能单独影响Master或者Segment，也可能二者都影响到。</shortdesc>
    <body>
      <p>服务器配置文件包含着配置服务器行为的参数。Greenplum数据库的配置文件<filepath>postgresql.conf</filepath>
        位于数据库实例的数据目录之下。</p>
      <p>Master和每一个Segment实例都有自己的<filepath>postgresql.conf</filepath>文件。
        一些参数是<i>本地</i>的：每个Segment实例检查它的<filepath>postgresql.conf</filepath>文件来得到这类
        参数的值。在Master和每一个Segment实例上都要设置本地参数。</p>
      <p>其他参数是用户要在Master实例上设置的<i>master</i>参数。其值会在查询运行时被向下传递到Segment实例
        （或者在某些情况中会被忽略）。</p>
      <p>有关<i>本地</i>以及<i>master</i>服务器配置参数的信息请见<cite>Greenplum Database Reference Guide</cite>。</p>
    </body>
  </topic>
  <topic id="topic3" xml:lang="en">
    <title id="kh155020">设置配置参数</title>
    <shortdesc>服务器配置参数可以在几个不同的级别上进行设置，这就使我们可以整体管理系统行为，也可以控制在某些情形下调整参数以
      调整系统行为。</shortdesc>
    <body>
      <p>很多配置参数限制了谁能改变它们以及何时何处它们可以被设置。例如，要改变特定的参数，用户必须是一个Greenplum数据库超级用户。
        其他参数只能从<filepath>postgresql.conf</filepath>文件中在系统级别上被设置，或者还要求系统重启让设置生效。</p>
      <p>很多配置参数是<i>会话</i>参数。用户可以在系统级别、数据库级别、角色级别或者会话级别设置会话参数。数据库用户可以在他们的
        会话中改变大部分会话参数，但是某些要求超级用户权限。关于设置服务器配置参数的信息请见
        <cite>Greenplum Database Reference Guide</cite>。</p>
    </body>
    <topic id="topic4" xml:lang="en">
      <title id="kh171457">设置本地配置参数</title>
      <body>
        <p>要在多个Segment中改变一个本地配置参数，在每一个目标Segment的<codeph>postgresql.conf</codeph>文件中更新该参数，
          包括主要的和镜像的Segment。使用<codeph>gpconfig</codeph>工具可以在所有的Greenplum <codeph>postgresql.conf</codeph>
          文件中设置一个参数。例如：</p>
        <p>
          <codeblock>$ gpconfig -c gp_vmem_protect_limit -v 4096MB</codeblock>
        </p>
        <p>重启Greenplum数据库让配置改变生效：</p>
        <p>
          <codeblock>$ gpstop -r</codeblock>
        </p>
      </body>
    </topic>
    <topic id="topic5" xml:lang="en">
      <title id="kh156891">设置Master配置参数</title>
      <body>
        <p>要设置Master配置参数，请在Greenplum数据库的Master实例上设置它。如果它也是一个<i>会话</i>参数，用户可以为一个特定数据库、
          角色或者会话设置该桉树。如果一个参数在多个级别上都被设置，最细粒度级别上的设置会优先。例如，会话覆盖角色，角色覆盖
          数据库，而数据库覆盖系统。</p>
      </body>
      <topic id="topic6" xml:lang="en">
        <title id="kh156892">设置系统级别参数</title>
        <body>
          <p>Master的<codeph>postgresql.conf</codeph>文件中的Master参数设置是系统范围默认的。要设置一个Master参数：</p>
          <ol>
            <li id="kh160766">编辑<codeph>$MASTER_DATA_DIRECTORY/postgresql.conf</codeph>文件</li>
            <li id="kh160741">找到要设置的参数，取消它的注释（移除前面的<codeph>#</codeph>字符），并且输入想要的值。</li>
            <li id="kh160753">保存并且关闭该文件。</li>
            <li id="kh160780">对于不需要重新启动服务器的<i>session</i>参数，按如下上传<codeph>postgresql.conf</codeph>的改变：<p>
                <codeblock>$ gpstop -u</codeblock>
              </p></li>
            <li id="kh160789">对于要求服务器重启的参数更改，按如下重启Greenplum数据库：<p>
                <codeblock>$ gpstop -r</codeblock>
              </p></li>
          </ol>
          <p>关于服务器配置参数的细节，请见<cite>Greenplum Database Reference Guide</cite>。</p>
        </body>
      </topic>
      <topic id="topic7" xml:lang="en">
        <title>设置数据库级别参数</title>
        <body>
          <p>使用<codeph>ALTER DATABASE</codeph>在数据库级别设置参数。例如：</p>
          <p>
            <codeblock>=# ALTER DATABASE mydatabase SET search_path TO myschema;</codeblock>
          </p>
          <p>当用户在数据库级别设置一个会话参数时，每一个连接到该数据库的会话都使用该参数设置。
            数据库级别的设置覆盖系统级别的设置。</p>
        </body>
      </topic>
      <topic id="topic8" xml:lang="en">
        <title>设置角色级别参数</title>
        <body>
          <p>使用<codeph>ALTER ROLE</codeph>在角色级别设置参数。例如：</p>
          <p>
            <codeblock>=# ALTER ROLE bob SET search_path TO bobschema;</codeblock>
          </p>
          <p>W当用户在角色级别设置一个会话参数时，每一个由该角色启动的会话都使用该参数设置。
            角色级别的设置覆盖数据库级别的设置。</p>
        </body>
      </topic>
      <topic id="topic9" xml:lang="en">
        <title>设置会话级别参数</title>
        <body>
          <p>任何会话参数都可以在一个活动数据库会话中用<codeph>SET</codeph>命令设置。例如：</p>
          <p>
            <codeblock>=# SET statement_mem TO '200MB';</codeblock>
          </p>
          <p>该参数设置对于这个会话的剩余时间都有效，直到发出一个<codeph>RESET</codeph>命令。例如：</p>
          <p>
            <codeblock>=# RESET statement_mem;</codeblock>
          </p>
          <p>会话级别的设置覆盖角色级别的设置。</p>
        </body>
      </topic>
    </topic>
  </topic>
  <topic id="topic10" xml:lang="en">
    <title id="kh170981">查看服务器配置参数设置</title>
    <body>
      <p>SQL命令<codeph>SHOW</codeph>允许用户查看当前的服务器配置参数设置。例如，要查看所有参数的设置：</p>
      <p>
        <codeblock>$ psql -c 'SHOW ALL;'</codeblock>
      </p>
      <p><codeph>SHOW</codeph>只列出Master实例的设置。要查看整个系统（Master和所有的Segment）
        中一个特定参数的值，使用<codeph>gpconfig</codeph>工具。例如：</p>
      <p>
        <codeblock>$ gpconfig --show max_connections</codeblock>
      </p>
    </body>
  </topic>
  <topic id="topic11" xml:lang="en">
    <title id="kh155019">配置参数种类</title>
    <shortdesc>配置某一行为的服务器配置参数会按种类分配在一起。</shortdesc>
    <body>
      <p>配置参数影响着多种服务器行为，例如资源消耗、查询调节以及认证。下列主题描述了
        Greenplum数据库配置参数的种类。有关配置参数种类的细节，请见<cite>Greenplum Database Reference Guide</cite>.</p>
      <ul>
        <li id="kh158485">
          <xref href="#topic12" type="topic" format="dita"/>
        </li>
        <li id="kh158498">
          <xref href="#topic15" type="topic" format="dita"/>
        </li>
        <li id="kh158520">
          <xref href="#topic21" type="topic" format="dita"/>
        </li>
        <li id="kh158533">
          <xref href="#topic29" type="topic" format="dita"/>
        </li>
        <li id="kh171207">
          <xref href="#topic33" type="topic" format="dita"/>
        </li>
        <li id="kh158545">
          <xref href="#topic37" type="topic" format="dita"/>
        </li>
        <li id="kh166320">
          <xref href="#topic38" type="topic" format="dita"/>
        </li>
        <li id="kh158554">
          <xref href="#topic39" type="topic" format="dita"/>
        </li>
        <li id="kh158572">
          <xref href="#topic43" type="topic" format="dita"/>
        </li>
        <li id="kh158581">
          <xref href="#topic44" type="topic" format="dita"/>
        </li>
        <li id="kh158590">
          <xref href="#topic45" type="topic" format="dita"/>
        </li>
        <li id="kh158599">
          <xref href="#topic48" type="topic" format="dita"/>
        </li>
        <li id="kh158608">
          <xref href="#topic49" type="topic" format="dita"/>
        </li>
        <li id="kh184388">
          <xref href="#topic55" type="topic" format="dita"/>
        </li>
      </ul>
    </body>
    <topic id="topic12" xml:lang="en">
      <title id="kh155037">连接和认证参数</title>
      <body>
        <p>这些参数控制着客户端如何连接到Greenplum数据库以及如何被认证。有关配置客户端认证的信息请见
            <xref href="../partIII.xml#topic1" type="topic" format="dita"/>。</p>
      </body>
      <topic id="topic13" xml:lang="en">
        <title>连接参数</title>
        <body>
          <simpletable id="kh159468">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_vmem_idle_resource_timeout</codeph>
                </p>
                <p>
                  <codeph>listen_addresses</codeph>
                </p>
                <p>
                  <codeph>max_connections</codeph>
                </p>
                <p>
                  <codeph>max_prepared_transactions</codeph>
                </p>
                <p>
                  <codeph>superuser_reserved_connections</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>tcp_keepalives_count</codeph>
                </p>
                <p>
                  <codeph>tcp_keepalives_idle</codeph>
                </p>
                <p>
                  <codeph>tcp_keepalives_interval</codeph>
                </p>
                <p>
                  <codeph>unix_socket_directory</codeph>
                </p>
                <p>
                  <codeph>unix_socket_group</codeph>
                </p>
                <p>
                  <codeph>unix_socket_permissions</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic14" xml:lang="en">
        <title>安全性和认证参数</title>
        <body>
          <simpletable id="kh159695">
            <strow>
              <stentry>
                <p>
                  <codeph>authentication_timeout</codeph>
                </p>
                <p>
                  <codeph>db_user_namespace</codeph>
                </p>
                <p>
                  <codeph>krb_caseins_users</codeph>
                </p>
                <p>
                  <codeph>krb_server_keyfile</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>krb_srvname</codeph>
                </p>
                <p>
                  <codeph>password_encryption</codeph>
                </p>
                <p>
                  <codeph>ssl</codeph>
                </p>
                <p>
                  <codeph>ssl_ciphers</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
    </topic>
    <topic id="topic15" xml:lang="en">
      <title id="kh155038">系统资源消耗参数</title>
      <topic id="topic16" xml:lang="en">
        <title>内存消耗参数</title>
        <body>
          <p>这些参数控制着系统的内存使用。用户可以调整<codeph>gp_vmem_protect_limit</codeph>来避免
            查询处理期间在Segment上耗尽内存。</p>
          <simpletable id="kh160388">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_vmem_idle_resource_timeout</codeph>
                </p>
                <p>
                  <codeph>gp_vmem_protect_limit</codeph>
                </p>
                <p>
                  <codeph>gp_vmem_protect_segworker_cache_limit</codeph>
                </p>
                <p>
                  <codeph>gp_workfile_limit_files_per_query</codeph>
                </p>
                <p>
                  <codeph>gp_workfile_limit_per_query</codeph>
                </p>
                <p>
                  <codeph>gp_workfile_limit_per_segment</codeph>
                </p>
                <p>
                  <codeph>max_appendonly_tables</codeph>
                </p>
                <p>
                  <codeph>max_prepared_transactions</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>max_stack_depth</codeph>
                </p>
                <p>
                  <codeph>shared_buffers</codeph>
                </p>
                <p>
                  <codeph>temp_buffers</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic18" xml:lang="en">
        <title>操作系统资源参数</title>
        <body>
          <ul>
            <li id="kh161068">
              <codeph>max_files_per_process</codeph>
            </li>
            <li id="kh161069">
              <codeph>shared_preload_libraries</codeph>
            </li>
          </ul>
        </body>
      </topic>
      <topic id="topic19" xml:lang="en">
        <title>基于代价的清理延迟参数</title>
        <body>
          <note type="warning">Pivotal不鼓励使用基于代价的清理延迟，因为它会在Segment实例之间异步运行。
            在Segment级别调用的清理代价限制和延迟没有考虑整个Greenplum阵列的状态。</note>
          <p>用户可以配置<codeph>VACUUM</codeph>以及<codeph>ANALYZE</codeph>命令的执行代价以降低对并发数据库活动的
            I/O影响。当累计的I/O操作代价达到了限制，执行该操作的进程会睡眠一会儿，然后重置计数器并且继续执行。</p>
          <simpletable id="kh161372">
            <strow>
              <stentry>
                <p>
                  <codeph>vacuum_cost_delay</codeph>
                </p>
                <p>
                  <codeph>vacuum_cost_limit</codeph>
                </p>
                <p>
                  <codeph>vacuum_cost_page_dirty</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>vacuum_cost_page_hit</codeph>
                </p>
                <p>
                  <codeph>vacuum_cost_page_miss</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic20" xml:lang="en">
        <title>事务ID管理参数</title>
        <body>
          <ul>
            <li id="kh183815">
              <codeph>xid_stop_limit</codeph>
            </li>
            <li id="kh183844">
              <codeph>xid_warn_limit</codeph>
            </li>
          </ul>
        </body>
      </topic>
    </topic>
    <topic id="topic21" xml:lang="en">
      <title id="kh183779">查询调节参数</title>
      <topic id="topic22" xml:lang="en">
        <title>查询计划操作符控制参数</title>
        <body>
          <p>下列参数控制传统查询优化器能使用的计划操作的类型。启用或者禁用计划操作能强制传统查询
            优化器选择一种不同的计划。这对于测试和比较使用不同计划类型的查询性能非常有用。</p>
          <simpletable id="kh158625">
            <strow>
              <stentry>
                <p>
                  <codeph>enable_bitmapscan</codeph>
                </p>
                <p>
                  <codeph>enable_groupagg</codeph>
                </p>
                <p>
                  <codeph>enable_hashagg</codeph>
                </p>
                <p>
                  <codeph>enable_hashjoin</codeph>
                </p>
                <p>
                  <codeph>enable_indexscan</codeph>
                </p>
                <p>
                  <codeph>enable_mergejoin</codeph>
                </p>
                <p>
                  <codeph>enable_nestloop</codeph>
                </p>
                <p>
                  <codeph>enable_seqscan</codeph>
                </p>
                <p>
                  <codeph>enable_sort</codeph>
                </p>
                <p>
                  <codeph>enable_tidscan</codeph>
                </p>
                <p>
                  <codeph>gp_enable_adaptive_nestloop</codeph>
                </p>
                <p>
                  <codeph>gp_enable_agg_distinct</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_enable_agg_distinct_pruning</codeph>
                </p>
                <p>
                  <codeph>gp_enable_direct_dispatch</codeph>
                </p>
                <p>
                  <codeph>gp_enable_fast_sri</codeph>
                </p>
                <p>
                  <codeph>gp_enable_groupext_distinct_gather</codeph>
                </p>
                <p>
                  <codeph>gp_enable_groupext_distinct_pruning</codeph>
                </p>
                <p>
                  <codeph>gp_enable_multiphase_agg</codeph>
                </p>
                <p>
                  <codeph>gp_enable_predicate_propagation</codeph>
                </p>
                <p>
                  <codeph>gp_enable_preunique</codeph>
                </p>
                <p>
                  <codeph>gp_enable_sort_distinct</codeph>
                </p>
                <p>
                  <codeph>gp_enable_sort_limit</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic23" xml:lang="en">
        <title>查询优化器代价参数</title>
        <body>
          <note type="warning">不要调整这些代价参数。它们已经被调整为反映Greenplum数据库的硬件配置
            以及典型的负载。所有这些参数都是相关的。只改其中一个可能会对性能产生反效果。<simpletable id="kh181234">
              <strow>
                <stentry>
                  <p>
                    <codeph>cpu_index_tuple_cost</codeph>
                  </p>
                  <p>
                    <codeph>cpu_operator_cost</codeph>
                  </p>
                  <p>
                    <codeph>cpu_tuple_cost</codeph>
                  </p>
                  <p>
                    <codeph>cursor_tuple_fraction</codeph>
                  </p>
                  <p>
                    <codeph>effective_cache_size</codeph>
                  </p>
                </stentry>
                <stentry>
                  <p>
                    <codeph>gp_motion_cost_per_row</codeph>
                  </p>
                  <p>
                    <codeph>gp_segments_for_planner</codeph>
                  </p>
                  <p>
                    <codeph>random_page_cost</codeph>
                  </p>
                  <p>
                    <codeph>seq_page_cost</codeph>
                  </p>
                </stentry>
              </strow>
            </simpletable></note>
        </body>
      </topic>
      <topic id="topic24" xml:lang="en">
        <title>数据库统计信息采样参数</title>
        <body>
          <p>这些参数调整被一次<codeph>ANALYZE</codeph>操作采样的数据量。调整这些参数会影响
            系统范围的统计信息收集。用户可以通过使用<codeph>ALTER TABLE</codeph>的
            <codeph>SET STATISTICS</codeph>子句在特定表上配置统计信息收集。</p>
          <ul>
            <li id="kh158362">
              <codeph>default_statistics_target </codeph>
            </li>
          </ul>
        </body>
      </topic>
      <topic id="topic25" xml:lang="en">
        <title>排序操作符配置参数</title>
        <body>
          <ul>
            <li id="kh158154">
              <codeph>gp_enable_sort_distinct</codeph>
            </li>
            <li id="kh158155">
              <codeph>gp_enable_sort_limit</codeph>
            </li>
          </ul>
        </body>
      </topic>
      <topic id="topic26" xml:lang="en">
        <title>聚集操作符配置参数</title>
        <body>
          <simpletable id="kh162730">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_enable_agg_distinct</codeph>
                </p>
                <p>
                  <codeph>gp_enable_agg_distinct_pruning</codeph>
                </p>
                <p>
                  <codeph>gp_enable_multiphase_agg</codeph>
                </p>
                <p>
                  <codeph>gp_enable_preunique</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_enable_groupext_distinct_gather</codeph>
                </p>
                <p>
                  <codeph>gp_enable_groupext_distinct_pruning</codeph>
                </p>
                <p>
                  <codeph>gp_workfile_compression</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic27" xml:lang="en">
        <title>连接操作符配置参数</title>
        <body>
          <simpletable id="kh162782">
            <strow>
              <stentry>
                <p>
                  <codeph>join_collapse_limit</codeph>
                </p>
                <p>
                  <codeph>gp_adjust_selectivity_for_outerjoins</codeph>
                </p>
                <p>
                  <codeph>gp_hashjoin_tuples_per_bucket</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_statistics_use_fkeys</codeph>
                </p>
                <p>
                  <codeph>gp_workfile_compression</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic28" xml:lang="en">
        <title>其他传统查询优化器配置参数</title>
        <body>
          <ul>
            <li id="kh175850">
              <codeph>from_collapse_limit </codeph>
            </li>
            <li id="kh167802">
              <codeph>gp_enable_predicate_propagation</codeph>
            </li>
            <li id="kh183757">
              <codeph>gp_max_plan_size</codeph>
            </li>
            <li id="kh167484">
              <codeph>gp_statistics_pullup_from_child_partition</codeph>
            </li>
          </ul>
        </body>
      </topic>
    </topic>
    <topic id="topic29" xml:lang="en">
      <title id="kh155046">错误报告和日志参数</title>
      <topic id="topic30" xml:lang="en">
        <title>日志轮转</title>
        <body>
          <simpletable id="kh163344">
            <strow>
              <stentry>
                <p>
                  <codeph>log_rotation_age</codeph>
                </p>
                <p>
                  <codeph>log_rotation_size</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>log_truncate_on_rotation</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic31" xml:lang="en">
        <title>什么时候记录日志</title>
        <body>
          <simpletable id="kh163424">
            <strow>
              <stentry>
                <p>
                  <codeph>client_min_messages</codeph>
                </p>
                <p>
                  <codeph>log_error_verbosity</codeph>
                </p>
                <p>
                  <codeph>log_min_duration_statement</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>log_min_error_statement</codeph>
                </p>
                <p>
                  <codeph>log_min_messages</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic32" xml:lang="en">
        <title>记录什么</title>
        <body>
          <simpletable id="kh171216">
            <strow>
              <stentry>
                <p>
                  <codeph>debug_pretty_print</codeph>
                </p>
                <p>
                  <codeph>debug_print_parse</codeph>
                </p>
                <p>
                  <codeph>debug_print_plan</codeph>
                </p>
                <p>
                  <codeph>debug_print_prelim_plan</codeph>
                </p>
                <p>
                  <codeph>debug_print_rewritten</codeph>
                </p>
                <p>
                  <codeph>debug_print_slice_table</codeph>
                </p>
                <p>
                  <codeph>log_autostats</codeph>
                </p>
                <p>
                  <codeph>log_connections</codeph>
                </p>
                <p>
                  <codeph>log_disconnections</codeph>
                </p>
                <p>
                  <codeph>log_dispatch_stats</codeph>
                </p>
                <p>
                  <codeph>log_duration</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>log_executor_stats</codeph>
                </p>
                <p>
                  <codeph>log_hostname</codeph>
                </p>
                <p>
                  <codeph>log_parser_stats</codeph>
                </p>
                <p>
                  <codeph>log_planner_stats</codeph>
                </p>
                <p>
                  <codeph>log_statement</codeph>
                </p>
                <p>
                  <codeph>log_statement_stats</codeph>
                </p>
                <p>
                  <codeph>log_timezone</codeph>
                </p>
                <p>
                  <codeph>gp_debug_linger</codeph>
                </p>
                <p>
                  <codeph>gp_log_format</codeph>
                </p>
                <p>
                  <codeph>gp_reraise_signal</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
    </topic>
    <topic id="topic33" xml:lang="en">
      <title id="kh171299">系统监控参数</title>
      <topic id="topic36" xml:lang="en">
        <title>Greenplum性能监控数据收集代理</title>
        <body>
          <p>下列命令针对数据库(<codeph>gpperfmon</codeph>)设置数据收集代理。</p>
          <simpletable id="kh171891">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_enable_gpperfmon</codeph>
                </p>
                <p>
                  <codeph>gp_gpperfmon_send_interval</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gpperfmon_log_alert_level</codeph>
                </p>
                <p>
                  <codeph>gpperfmon_port</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
    </topic>
    <topic id="topic37" xml:lang="en">
      <title id="kh171364">运行时统计信息收集参数</title>
      <body>
        <p>这些参数控制服务器统计信息收集特性。当统计信息收集被启用时，用户可以使用
          <i>pg_stat</i>以及<i>pg_statio</i>家族的系统目录视图来访问统计信息数据。</p>
        <simpletable id="kh171301">
          <strow>
            <stentry>
              <p>
                <codeph>stats_queue_level</codeph>
              </p>
            </stentry>
            <stentry>
              <p>
                <codeph>update_process_title</codeph>
              </p>
            </stentry>
          </strow>
        </simpletable>
      </body>
    </topic>
    <topic id="topic38" xml:lang="en">
      <title id="kh155054">自动统计信息收集参数</title>
      <body>
        <p>当自动统计信息收集被启用时，在某个阈值的行被影响(<codeph>on_change</codeph>)时或者一个新产生的表没有统计信息
          (<codeph>on_no_stats</codeph>)时，用户可以自动地在<codeph>INSERT</codeph>、<codeph>UPDATE</codeph>、 
          <codeph>DELETE</codeph>、<codeph>COPY</codeph>或者<codeph>CREATE TABLE...AS SELECT</codeph>
          语句的同一个事务中自动运行<codeph>ANALYZE</codeph>。要启用这一特性，在用户的Greenplum Master的
          <codeph>postgresql.conf</codeph>文件中设置下列服务器配置参数并且重启数据库：</p>
        <ul>
          <li id="kh166083">
            <codeph>gp_autostats_mode</codeph>
          </li>
          <li id="kh181502">
            <codeph>log_autostats</codeph>
          </li>
        </ul>
        <note type="warning">取决于用户的数据库操作的特质，自动统计信息收集可能会带来负面的性能影响。
          请仔细评估<codeph>on_no_stats</codeph>的默认设置是否适合用户的系统。</note>
      </body>
    </topic>
    <topic id="topic39" xml:lang="en">
      <title id="kh181507">客户端连接默认参数</title>
      <topic id="topic40" xml:lang="en">
        <title>语句行为参数</title>
        <body>
          <simpletable id="kh163609">
            <strow>
              <stentry>
                <p>
                  <codeph>check_function_bodies</codeph>
                </p>
                <p>
                  <codeph>default_tablespace</codeph>
                </p>
                <p>
                  <codeph>default_transaction_isolation</codeph>
                </p>
                <p>
                  <codeph>default_transaction_read_only</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>search_path</codeph>
                </p>
                <p>
                  <codeph>statement_timeout</codeph>
                </p>
                <p>
                  <codeph>vacuum_freeze_min_age</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic41" xml:lang="en">
        <title>区域和格式化参数</title>
        <body>
          <simpletable id="kh163748">
            <strow>
              <stentry>
                <p>
                  <codeph>client_encoding</codeph>
                </p>
                <p>
                  <codeph>DateStyle</codeph>
                </p>
                <p>
                  <codeph>extra_float_digits</codeph>
                </p>
                <p>
                  <codeph>IntervalStyle</codeph>
                </p>
                <p>
                  <codeph>lc_collate</codeph>
                </p>
                <p>
                  <codeph>lc_ctype</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>lc_messages</codeph>
                </p>
                <p>
                  <codeph>lc_monetary</codeph>
                </p>
                <p>
                  <codeph>lc_numeric</codeph>
                </p>
                <p>
                  <codeph>lc_time</codeph>
                </p>
                <p>
                  <codeph>TimeZone</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic42" xml:lang="en">
        <title>其他客户端默认参数</title>
        <body>
          <simpletable id="kh164407">
            <strow>
              <stentry>
                <p>
                  <codeph>dynamic_library_path</codeph>
                </p>
                <p>
                  <codeph>explain_pretty_print</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>local_preload_libraries</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
    </topic>
    <topic id="topic43" xml:lang="en">
      <title id="kh163788">锁管理参数</title>
      <body>
        <ul>
          <li id="kh164628">
            <codeph>deadlock_timeout</codeph>
          </li>
          <li id="kh164623">
            <codeph>max_locks_per_transaction</codeph>
          </li>
        </ul>
      </body>
    </topic>
    <topic id="topic44" xml:lang="en">
      <title id="kh155069">负载管理参数</title>
      <body>
        <p>下列配置参数配置Greenplum数据库负载管理特性（资源队列）、查询优先、内存利用和并发控制。</p>
        <simpletable id="kh157161">
          <strow>
            <stentry>
              <p>
                <codeph>gp_resqueue_priority</codeph>
              </p>
              <p>
                <codeph>gp_resqueue_priority_cpucores_per_segment</codeph>
              </p>
              <p>
                <codeph>gp_resqueue_priority_sweeper_interval</codeph>
              </p>
              <p>
                <codeph>gp_vmem_idle_resource_timeout</codeph>
              </p>
              <p>
                <codeph>gp_vmem_protect_limit</codeph>
              </p>
              <p>
                <codeph>gp_vmem_protect_segworker_cache_limit</codeph>
              </p>
            </stentry>
            <stentry>
              <p>
                <codeph>max_resource_queues</codeph>
              </p>
              <p>
                <codeph>max_resource_portals_per_transaction</codeph>
              </p>
              <p>
                <codeph>resource_cleanup_gangs_on_wait</codeph>
              </p>
              <p>
                <codeph>resource_select_only</codeph>
              </p>
              <p>
                <codeph>stats_queue_level</codeph>
              </p>
            </stentry>
          </strow>
        </simpletable>
      </body>
    </topic>
    <topic id="topic45" xml:lang="en">
      <title id="kh155070">外部表参数</title>
      <body>
        <p>下面的参数配置Greenplum数据库的外部表特性。有关外部表的信息请见
            <xref href="../load/topics/g-external-tables.xml#topic3"/>。</p>
        <simpletable id="kh164454">
          <strow>
            <stentry>
              <p>
                <codeph>gp_external_enable_exec</codeph>
              </p>
              <p>
                <codeph>gp_external_max_segs</codeph>
              </p>
            </stentry>
            <stentry>
              <p>
                <codeph>gp_initial_bad_row_limit</codeph>
              </p>
              <p>
                <codeph>gp_reject_percent_threshold</codeph>
              </p>
              <p>
                <codeph>readable_external_table_timeout</codeph>
              </p>
            </stentry>
          </strow>
        </simpletable>
      </body>
    </topic>
    <topic id="topic46" xml:lang="en">
      <title id="kh155071">追加优化表参数</title>
      <body>
        <p>下列参数配置Greenplum数据库的追加优化表的特性。更多有关追加优化表的信息请见
          <xref href="../ddl/ddl-storage.xml#topic38"/>。</p>
        <ul>
          <li id="kh164980">
            <codeph>max_appendonly_tables</codeph>
          </li>
          <li id="kh184249">
            <codeph>gp_appendonly_compaction</codeph>
          </li>
          <li id="kh184260">
            <codeph>gp_appendonly_compaction_threshold</codeph>
          </li>
        </ul>
      </body>
    </topic>
    <topic id="topic48" xml:lang="en">
      <title id="kh178569">以往的PostgreSQL版本兼容参数</title>
      <body>
        <p>下列参数提供对旧版本PostgreSQL的兼容性。在Greenplum数据库中用户不需要改变这些参数。</p>
        <simpletable id="kh162083">
          <strow>
            <stentry>
              <p>
                <codeph>array_nulls</codeph>
              </p>
              <p>
                <codeph>backslash_quote</codeph>
              </p>
              <p>
                <codeph>escape_string_warning</codeph>
              </p>
            </stentry>
            <stentry>
              <p>
                <codeph>regex_flavor</codeph>
              </p>
              <p>
                <codeph>standard_conforming_strings</codeph>
              </p>
              <p>
                <codeph>transform_null_equals</codeph>
              </p>
            </stentry>
          </strow>
        </simpletable>
      </body>
    </topic>
    <topic id="topic49" xml:lang="en">
      <title id="kh182770">Greenplum阵列配置参数</title>
      <body>
        <p>这个主题中的参数控制着Greenplum数据库阵列及其组件（Segment、Master、分布式事务管理器、Master镜像和Interconnect）的配置。</p>
      </body>
      <topic id="topic50" xml:lang="en">
        <title>Interconnect配置参数</title>
        <body>
          <simpletable id="kh162132">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_interconnect_fc_method</codeph>
                </p>
                <p>
                  <codeph>gp_interconnect_hash_multiplier</codeph>
                </p>
                <p>
                  <codeph>gp_interconnect_queue_depth</codeph>
                </p>
                <p>
                  <codeph>gp_interconnect_snd_queue_depth</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_interconnect_setup_timeout</codeph>
                </p>
                <p>
                  <codeph>gp_interconnect_type</codeph>
                </p>
                <p>
                  <codeph>gp_max_packet_size</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic51" xml:lang="en">
        <title>分派配置参数</title>
        <body>
          <simpletable id="kh162158">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_cached_segworkers_threshold</codeph>
                </p>
                <p>
                  <codeph>gp_enable_direct_dispatch</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_segment_connect_timeout</codeph>
                </p>
                <p>
                  <codeph>gp_set_proc_affinity</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic52" xml:lang="en">
        <title>错误操作参数</title>
        <body>
          <simpletable id="kh165991">
            <strow>
              <stentry>
                <p>
                  <codeph>gp_set_read_only</codeph>
                </p>
                <p>
                  <codeph>gp_fts_probe_interval</codeph>
                </p>
              </stentry>
              <stentry>
                <p>
                  <codeph>gp_fts_probe_threadcount</codeph>
                </p>
              </stentry>
            </strow>
          </simpletable>
        </body>
      </topic>
      <topic id="topic53" xml:lang="en">
        <title>分布式事务管理参数</title>
        <body>
          <ul>
            <li id="kh165869">
              <codeph>gp_max_local_distributed_cache</codeph>
            </li>
          </ul>
        </body>
      </topic>
      <topic id="topic54" xml:lang="en">
        <title>只读参数</title>
        <body>
          <ul>
            <li id="kh164510">
              <codeph>gp_command_count</codeph>
            </li>
            <li id="kh177751">
              <codeph>gp_content</codeph>
            </li>
            <li id="kh177743">
              <codeph>gp_dbid</codeph>
            </li>
            <li id="kh164511">
              <codeph>gp_role</codeph>
            </li>
            <li id="kh157457">
              <codeph>gp_session_id</codeph>
            </li>
          </ul>
        </body>
      </topic>
    </topic>
    <topic id="topic55" xml:lang="en">
      <title id="kh184289">Greenplum的Master镜像参数</title>
      <body>
        <p>这些参数控制Greenplum数据的主Master和备Master之间的复制配置</p>
        <ul>
          <li id="kh184294">
            <codeph>keep_wal_segments</codeph>
          </li>
          <li id="kh184295">
            <codeph>repl_catchup_within_range</codeph>
          </li>
          <li id="kh184296">
            <codeph>replication_timeout</codeph>
          </li>
          <li id="kh184297">
            <codeph>wal_receiver_status_interval</codeph>
          </li>
        </ul>
      </body>
    </topic>
  </topic>
</topic>
