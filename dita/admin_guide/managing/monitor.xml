<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1" xml:lang="en">
  <title id="kj138244">监控Greenplum系统</title>
  <shortdesc>可以用系统中包含的各种工具以及附加组件来监控一个Greenplum数据库系统。</shortdesc>
  <body>
    <p>观察Greenplum数据库系统日常的性能有助于管理员理解系统的行为、计划工作流以及故障排查问题。
      本章讨论用于监控数据库性能和活动的工具。</p>
    <p>另外，记得回顾<xref href="../monitoring/monitoring.dita#topic_kmz_lbg_rp"/>中编写脚本
      监控活动来快速检测系统中问题的有关内容。</p>
  </body>
  <topic id="topic2" xml:lang="en">
    <title id="kj157177">监控数据库活动和性能</title>
    <body>
      <p>Greenplum数据库包含一个可选的系统监控和管理数据库<codeph>gpperfmon</codeph>，管理员可以
        选择启用它。<codeph>gpperfmon_install</codeph>命令行工具创建<codeph>gpperfmon</codeph>
        数据库并启用数据收集代理来存储查询和系统矩阵信息到该数据库。管理员可以查询<codeph>gpperfmon</codeph>
        数据库中的矩阵信息。更多<codeph>gpperfmon</codeph>的信息，请见<cite>Greenplum Database Reference
        Guide</cite>。</p>
      <p otherprops="pivotal">Pivotal Greenplum Command Center，是一个图形化界面选项，可以用图形化界面展示
        <codeph>gpperfmon</codeph>数据库收集的矩阵信息并提供其他一些系统管理工具。可以从
       <xref href="https://network.pivotal.io/products/pivotal-gpdb" scope="external" format="html">Pivotal
          Network</xref>下载安装包，可以从<xref href="http://gpcc.docs.pivotal.io"
          scope="external" format="html">Greenplum Command Center Documentation</xref>网站查看相关文档。
      </p>
    </body>
  </topic>
  <topic id="topic3" xml:lang="en">
    <title id="kj155080">监控系统状态</title>
    <body>
      <p>作为一个Greenplum数据库管理员，必须监控系统的问题事件，例如一个Segment宕机或者一台Segment主机磁盘
        空间耗尽。下面的主题描述如何监控一个Greenplum数据库系统的健康状况以及检查一个Greenplum数据库系统的
        特定状态信息。</p>
      <ul>
        <li id="kj167000">
          <xref href="#topic12" type="topic" format="dita"/>
        </li>
        <li id="kj167035">
          <xref href="#topic15" type="topic" format="dita"/>
        </li>
        <li id="kj167040">
          <xref href="#topic20" type="topic" format="dita"/>
        </li>
        <li id="kj184001">
          <xref href="#topic24" type="topic" format="dita"/>
        </li>
        <li>
          <xref href="#topic_slt_ddv_1q" format="dita"/>
        </li>
        <li id="kj185839">
          <xref href="#topic27" type="topic" format="dita"/>
        </li>
      </ul>
    </body>
    </topic>
    <topic id="topic12" xml:lang="en">
      <title id="kj169037">检查系统状态</title>
      <body>
        <p>一个Greenplum数据库系统由横跨多台机器的多个PostgreSQL实例（Master和Segment）构成。要监控一个
          Greenplum数据库系统，需要了解整个系统的信息以及个体实例的状态信息。<codeph>gpstate</codeph>
          工具提供有关一个Greenplum数据库系统的状态信息。</p>
      </body>
      <topic id="topic13" xml:lang="en">
        <title>查看Master和Segment的状态及配置</title>
        <body>
          <p>默认的<codeph>gpstate</codeph>行为是检查Segment实例并且显示可用和失效Segment的一个简短状态。
            例如，要快速查看Greenplum数据库系统的状态：</p>
          <p>
            <codeblock>$ gpstate
</codeblock>
          </p>
          <p>要查看Greenplum数据库阵列配置更详细的信息，使用带有<codeph>-s</codeph>选项的<codeph>gpstate</codeph>：
               </p>
          <p>
            <codeblock>$ gpstate -s
</codeblock>
          </p>
        </body>
      </topic>
      <topic id="topic14" xml:lang="en">
        <title id="kj156031">查看镜像配置和状态</title>
        <body>
          <p>如果在使用镜像作为数据冗余，用户可能想要看看系统中的镜像Segment实例列表、它们当前的同步状态以及
            镜像和主Segment之间的映射。例如，要查看一个系统中的镜像Segment和它们的状态：5</p>
          <p>
            <codeblock>$ gpstate -m 
</codeblock>
          </p>
          <p>要查看主Segment到镜像Segment的映射：</p>
          <p>
            <codeblock>$ gpstate -c
</codeblock>
          </p>
          <p>要查看后备Master镜像的状态：</p>
          <p>
            <codeblock>$ gpstate -f
</codeblock>
          </p>
        </body>
      </topic>
    </topic>
    <topic id="topic15" xml:lang="en">
      <title id="kj155115">检查磁盘空间使用</title>
      <body>
        <p>一个数据库管理员最重要的监控任务是确保Master和Segment数据目录所在的文件系统的使用率不会超过
          70%的。完全占满的数据磁盘不会导致数据损坏，但是可能会妨碍数据库的正常操作。如果磁盘占用得太满，
          可能会导致数据库服务器关闭。</p>
        <p>可以使用<codeph>gp_toolkit</codeph>管理模式中的<codeph>gp_disk_free</codeph>外部表
          来检查Segment主机文件系统中的剩余空闲空间（以KB为计量单位）。例如：</p>
        <p>
          <codeblock>=# SELECT * FROM gp_toolkit.gp_disk_free 
   ORDER BY dfsegment;
</codeblock>
        </p>
      </body>
      <topic id="topic16" xml:lang="en">
        <title>检查分布式数据库和表的大小</title>
        <body>
          <p><codeph>gp_toolkit</codeph>管理模式包含几个可以用来判断Greenplum数据库的分布式数据库、
            模式、表或索引磁盘空间使用的视图。</p>
          <p>用于检查数据库对象尺寸和磁盘空间的视图列表，请见<i>Greenplum Database Reference Guide</i>.</p>
        </body>
        <topic id="topic17" xml:lang="en">
          <title id="kj155338">查看一个数据库的磁盘空间使用情况</title>
          <body>
            <p>要查看一个数据库的总大小（以字节计），使用<i>gp_toolkit</i>管理模式中的<i>gp_size_of_database</i>
              视图。例如：</p>
            <p>
              <codeblock>=&gt; SELECT * FROM gp_toolkit.gp_size_of_database 
   ORDER BY sodddatname;
</codeblock>
            </p>
          </body>
        </topic>
        <topic id="topic18" xml:lang="en">
          <title id="kj155347">查看一个表的磁盘空间使用情况</title>
          <body>
            <p><i>gp_toolkit</i>管理模式包含几个检查表大小的视图。表大小视图根据对象ID
              （而不是名称）列出表。要根据一个表的名称检查其尺寸，必须在<i>pg_class</i>表中查找关系名称
              （<codeph>relname</codeph>）。例如：</p>
            <p>
              <codeblock>=&gt; SELECT relname AS name, sotdsize AS size, sotdtoastsize 
   AS toast, sotdadditionalsize AS other 
   FROM gp_toolkit.gp_size_of_table_disk as sotd, pg_class 
   WHERE sotd.sotdoid=pg_class.oid ORDER BY relname;
</codeblock>
            </p>
            <p>可用的表大小视图的列表请见<i>Greenplum Database
                Reference Guide</i>.</p>
          </body>
        </topic>
        <topic id="topic19" xml:lang="en">
          <title id="kj176079">查看索引的磁盘空间使用情况</title>
          <body>
            <p><i>gp_toolkit</i>管理模式包含几个用于检查索引大小的视图。要查看一个表上所有索引的总大小，使用
              <i>gp_size_of_all_table_indexes</i>视图。要查看一个特定索引的大小，使用<i>gp_size_of_index</i>视图。
              该索引大小视图根据对象ID（而不是名称）列出表和索引。要根据一个索引的名称查看其尺寸，必须在<i>pg_class</i>
              表中查找关系名称（<codeph>relname</codeph>）。例如：</p>
            <p>
              <codeblock>=&gt; SELECT soisize, relname as indexname
   FROM pg_class, gp_toolkit.gp_size_of_index
   WHERE pg_class.oid=gp_size_of_index.soioid 
   AND pg_class.relkind='i';
</codeblock>
            </p>
          </body>
        </topic>
      </topic>
    </topic>
    <topic id="topic20" xml:lang="en">
      <title id="kj155117">检查数据分布倾斜</title>
      <body>
        <p>Greenplum数据库中所有的表都是分布式的，意味着它们的数据被按规则划分到系统中的所有Segment上。
          不均匀分布的数据可能会削弱查询处理性能。一个表的分布策略在表创建时被确定。有关选择表分布策略的信息，
          请见下列主题：</p>
        <ul>
          <li id="kj191663">
            <xref href="#topic21" type="topic" format="dita"/>
          </li>
          <li id="kj191667">
            <xref href="#topic22" type="topic" format="dita"/>
          </li>
          <li id="kj167462">
            <xref href="#topic23" type="topic" format="dita"/>
          </li>
        </ul>
        <p><i>gp_toolkit</i>管理模式还包含一些用于检查表上数据分布倾斜的视图。有关如何检查非均匀数据分布的信息，
          请见<cite>Greenplum Database Reference Guide</cite>.</p>
      </body>
      <topic id="topic21" xml:lang="en">
        <title id="kj155907">查看一个表的分布键</title>
        <body>
          <p>要查看一个表中被用作数据分布键的列，可以使用<codeph>psql</codeph>中的<codeph>\d+</codeph>
            元命令来检查表的定义。例如：
           </p>
          <p>
            <codeblock>=# <codeph>\d+ sales
</codeph>                Table "retail.sales"
 Column      |     Type     | Modifiers | Description
-------------+--------------+-----------+-------------
 sale_id     | integer      |           |
 amt         | float        |           |
 date        | date         |           |
Has OIDs: no
Distributed by: (sale_id)
</codeblock>
          </p>
        <p>当我们创建复制表时，Greenplum数据库会在每个Segment上都存储一份完整的表数据。复制表没有分布键。
          <codeph>\d+</codeph>元命令会展示分布表的分布键，复制表展示状态为<codeph>Distributed Replicated</codeph>。</p>
        </body>
      </topic>
      <topic id="topic22" xml:lang="en">
        <title id="kj155842">查看数据分布</title>
        <body>
          <p>要查看一个表中行的数据分布（每个Segment上的行数），可以运行一个这样的查询：</p>
          <p>
            <codeblock>=# SELECT gp_segment_id, count(*) 
   FROM <i>table_name</i> GROUP BY gp_segment_id;
</codeblock>
          </p>
          <p>如果所有的Segment都有大致相同的行数，一个表就可以被认为是分布均匀的。</p>
          <note>如果在复制表上运行此查询，则失败，因为Greenplum数据库不允许用户查询引用系统列<codeph>gp_segment_id</codeph>（或系统列<codeph>ctid</codeph>，<codeph>cmin</codeph>，<codeph>cmax</codeph>，<codeph>xmin</codeph>和<codeph>xmax</codeph>）。
            因为每个segment都具有表的所有行，所以复制表按定义均匀分布。
            </note>
        </body>
      </topic>
      <topic id="topic23" xml:lang="en">
        <title id="kj155974">检查查询过程倾斜</title>
        <body>
          <p>当一个查询被执行时，所有的Segment应该具有等量的负载来保证最好的性能。如果发现了一个执行性能低下的查询，
            可能需要使用<codeph>EXPLAIN</codeph>命令进行深入研究。有关使用<codeph>EXPLAIN</codeph>命令和查询
            分析的信息，请见<xref
              href="../query/topics/query-profiling.xml#topic39"/>.</p>
          <p>如果表的数据分布策略与查询谓词没有很好地匹配，查询执行负载可能会倾斜。要检查执行倾斜，可以运行一个这样
            的查询：</p>
          <p>
            <codeblock>=# SELECT gp_segment_id, count(*) FROM <i>table_name</i>
   WHERE <i>column</i>='<i>value</i>' GROUP BY gp_segment_id;
</codeblock>
          </p>
          <p>这将显示对于给定的<codeph>WHERE</codeph>谓词，Segment会返回的行数。</p>
        <p>如<xref href="#topic22" format="dita"/>所说的, 该查询在复制表上运行时也会报错，因为在复制表上查询的
          <codeph>gp_segment_id</codeph>列不具有参考价值。</p>
          <section>
            <title>避免极度倾斜警告</title>
            <p>当执行一个使用哈希连接操作的查询时，可能会收到下面的警告消息：</p>
            <p>
              <codeph>Extreme skew in the innerside of Hashjoin</codeph>
            </p>
            <p>当一个哈希连接操作符的输入倾斜时，就会发生这种情况。它不会阻碍查询成功完成。可以按照这些步骤来避免计划
              中的倾斜：
              <ol id="ol_nwc_tyx_bq">
                <li>确保所有的事实表都被分析过。</li>
                <li>验证该查询用到的任何已填充临时表都被分析过。</li>
                <li>查看该查询的<codeph>EXPLAIN ANALYZE</codeph>计划，并且在其中查找以下信息：
                  <ul id="ul_kph_zyx_bq">
                    <li>如果有带多列过滤的扫描产生超过预估的行数，则将<codeph>gp_selectivity_damping_factor</codeph>
                      服务器配置参数的值设置为当前值的2倍以上并且重新测试该查询。
                      </li>
                    <li>如果在连接一个相对较小（小于5000行）的单一事实表时发生倾斜，将<codeph>gp_segments_for_planner</codeph>
                      服务器配置参数设置为1并且重新测试该查询。
                    </li>
                  </ul></li>
                <li>检查应用于该查询的过滤属性是否匹配基表的分布键。如果过滤属性和分布键相同，考虑用不同的
                  分布键重新分布一些基表。</li>
                <li>检查连接键的基数。如果基数较低，尝试用不同的连接列或者表上额外的过滤属性来重写该查询以降低行数。
                  这些更改可能会改变查询的语义。</li>
              </ol></p>
          </section>
        </body>
      </topic>
    </topic>
    <topic id="topic24" xml:lang="en">
      <title id="kj164952">查看数据库对象的元数据信息</title>
      <body>
        <p>Greenplum数据库在其系统目录中跟踪各种有关存储在数据库中对象（例如表、视图、索引等等）和
          全局对象（例如角色和表空间）的元数据信息。
         </p>
      </body>
      <topic id="topic25" xml:lang="en">
        <title>查看最后一个执行的操作</title>
        <body>
          <p>可以使用系统视图<i>pg_stat_operations</i>和 <i>pg_stat_partition_operations</i>
            查看在一个对象（例如一个表）上执行的动作。例如，要查看在一个表上执行的动作，比如它何时被创建以及它上一次是什么时候被清理和分析：
           </p>
          <p>
            <codeblock>=&gt; SELECT schemaname as schema, objname as table, 
   usename as role, actionname as action, 
   subtype as type, statime as time 
   FROM pg_stat_operations 
   WHERE objname='cust';
 schema | table | role | action  | type  | time
--------+-------+------+---------+-------+--------------------------
  sales | cust  | main | CREATE  | TABLE | 2016-02-09 18:10:07.867977-08
  sales | cust  | main | VACUUM  |       | 2016-02-10 13:32:39.068219-08
  sales | cust  | main | ANALYZE |       | 2016-02-25 16:07:01.157168-08
(3 rows)
</codeblock>
          </p>
        </body>
      </topic>
      <topic id="topic26" xml:lang="en">
        <title>查看一个对象的定义</title>
        <body>
          <p>要查看一个对象（例如表或者视图）的定义，在<codeph>psql</codeph>中可以使用<codeph>\d+</codeph>元命令。
            例如，要查看一个表的定义：
           </p>
          <p>
            <codeblock>=&gt; \d+ <i>mytable</i>
</codeblock>
          </p>
        </body>
      </topic>
    </topic>
    <topic id="topic_slt_ddv_1q">
      <title>查看会话内存使用信息</title>
      <body>
        <p>可以创建并且使用<i>session_level_memory_consumption</i>视图来查看正在Greenplum数据库上运行查询的会话的
          当前内存利用信息。该视图包含会话信息以及该会话连接到的数据库、该会话当前运行的查询和会话处理所消耗的内存等信息。
          </p>
        <ul id="ul_hwv_bbb_dq" otherprops="op-help">
          <li>
            <xref href="#topic_nby_j1b_dq" format="dita"/>
          </li>
          <li>
            <xref href="#topic7" format="dita"/>
          </li>
        </ul>
      </body>
      <topic id="topic_nby_j1b_dq">
        <title>创建session_level_memory_consumption视图</title>
        <body>
          <p>要在Greenplum数据库中创建<i>session_level_memory_consumption</i>视图，
            为每一个数据库运行一次扩展创建语句<codeph>CREATE EXTENSION gp_internal_tools;</codeph>。
            例如，要在数据库<codeph>testdb</codeph>中安装该视图，可使用这个命令：
           <codeblock>$ psql -d testdb -c "CREATE EXTENSION gp_internal_tools;"</codeblock></p>
        </body>
      </topic>
      <topic id="topic7" xml:lang="en">
        <title id="ff142493">session_level_memory_consumption视图</title>
        <body>
          <p>
            <i>session_level_memory_consumption</i>视图提供有关正在运行SQL查询的会话的内存消耗以及闲置时间的信息。</p>
          <p>当基于资源队列的资源管理方式启用时，在该视图中，列<codeph>is_runaway</codeph>表示是否Greenplum数据库认为
            该会话是一个失控会话，这种判断基于该会话的查询的vmem内存消耗来做出。在资源队列管理模式下，当查询消耗过多内存时，
            Greenplum数据库认为该会话处于失控状态。Greenplum数据库的服务器配置参数<codeph>runaway_detector_activation_percent</codeph>
            控制Greenplum数据库什么时候会认为一个会话是失控会话。
          </p>
          <p>在该视图中，当基于组的资源管理方式启用时，列<codeph>is_runaway</codeph>, <codeph>runaway_vmem_mb</codeph>,和
            <codeph>runaway_command_cnt</codeph>功能失效。</p>
          <table id="session_level_memory_consumption_table">
            <title>session_level_memory_consumption</title>
            <tgroup cols="4">
              <colspec colnum="1" colname="col1" colwidth="131pt"/>
              <colspec colnum="2" colname="col2" colwidth="86pt"/>
              <colspec colnum="3" colname="col3" colwidth="85pt"/>
              <colspec colnum="4" colname="col4" colwidth="147pt"/>
              <thead>
                <row>
                  <entry colname="col1">列</entry>
                  <entry colname="col2">类型</entry>
                  <entry colname="col3">引用</entry>
                  <entry colname="col4">描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry colname="col1">
                    <codeph>datname</codeph>
                  </entry>
                  <entry colname="col2">name</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">该会话连接到的数据库名。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>sess_id</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">会话ID。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>usename</codeph>
                  </entry>
                  <entry colname="col2">name</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">会话用户的用户名。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>current_query</codeph>
                  </entry>
                  <entry colname="col2">text</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">该会话正在运行的当前SQL查询。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>segid</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">Segment ID。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>vmem_mb</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">该会话的总vmem内存使用，以MB计。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>is_runaway</codeph>
                  </entry>
                  <entry colname="col2">boolean</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">会话被标记为在Segment上失控。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>qe_count</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">该会话的查询处理数量。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>active_qe_count</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">该会话的活动查询处理数量。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>dirty_qe_count</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">还没有释放其内存的查询处理的数量。<p>对于没有运行的会话该值为<codeph>-1</codeph>。</p></entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>runaway_vmem_mb</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">当会话被标记为失控会话时消耗的vmem内存量。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>runaway_command_cnt</codeph>
                  </entry>
                  <entry colname="col2">integer</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">当会话被标记为失控会话时的命令计数。</entry>
                </row>
                <row>
                  <entry colname="col1">
                    <codeph>idle_start</codeph>
                  </entry>
                  <entry colname="col2">timestamptz</entry>
                  <entry colname="col3"/>
                  <entry colname="col4">这个会话中上一次一个查询处理变成空闲的时间。</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
        </body>
      </topic>
    </topic>
    <topic id="topic27" xml:lang="en">
      <title id="kj185498">查看查询工作文件使用信息</title>
      <body>
        <p>Greenplum数据库管理方案<i>gp_toolkit</i>包含显示Greenplum数据库工作文件信息的视图。
          如果没有足够的内存让查询完全在内存中执行，Greenplum数据库会在磁盘上创建工作文件。这些
          信息可以用来故障排查和查询调优。这些视图中的信息也可以被用来为Greenplum数据库配置参数
          <codeph>gp_workfile_limit_per_query</codeph>和<codeph>gp_workfile_limit_per_segment</codeph>
          指定值。</p>
        <p>在模式<i>gp_toolkit</i>中有下面这些视图：</p>
        <ul>
          <li id="kj191083">gp_workfile_entries视图为当前在Segment上创建了工作文件的每个
            操作符都包含一行。</li>
          <li id="kj191084">gp_workfile_usage_per_query视图为当前在Segment上创建了工作
            文件的每个查询都包含一行。</li>
          <li id="kj191085">gp_workfile_usage_per_segment视图为每个Segment都包含一行。
            每一行显示了当前在该Segment上用于工作文件的总磁盘空间。</li>
        </ul>
        <p>有关使用<i>gp_toolkit</i>的信息请见<xref href="#topic31" format="dita"
          />。</p>
      </body>
    </topic>
  <topic id="topic28" xml:lang="en">
    <title id="kj166926">查看数据库服务器日志文件</title>
    <body>
      <p>Greenplum数据库中的每一个数据库实例（Master和Segment）都运行着一个有着自己的服务器日志文件的
        PostgreSQL数据库服务器。日常的日志文件被创建在Master和每个Segment的数据目录中的
        <codeph>pg_log</codeph>目录下。</p>
    </body>
    <topic id="topic29" xml:lang="en">
      <title id="kj165340">日志文件格式</title>
      <body>
        <p>服务器日志文件被写成一种逗号分隔值（CSV）格式。一些日志项并不会所有的域都有值。例如，只有与一个查询
          工作者进程相关的日志项才会有<codeph>slice_id</codeph>值。可以用查询的会话标识符（<codeph>gp_session_id</codeph>）
          和命令标识符（<codeph>gp_command_count</codeph>）来确定一个特定查询的相关日志项。</p>
        <p>下列域会被写入到日志中：</p>
        <table id="kj165707">
          <title>Greenplum数据库服务器日志格式</title>
          <tgroup cols="4">
            <colspec colnum="1" colname="col1" colwidth="28*"/>
            <colspec colnum="2" colname="col2" colwidth="90*"/>
            <colspec colnum="3" colname="col3" colwidth="89*"/>
            <colspec colnum="4" colname="col4" colwidth="241*"/>
            <thead>
              <row>
                <entry colname="col1">#</entry>
                <entry colname="col2">域名称</entry>
                <entry colname="col3">数据类型</entry>
                <entry colname="col4">描述</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry colname="col1">1</entry>
                <entry colname="col2">event_time</entry>
                <entry colname="col3">timestamp with time zone</entry>
                <entry colname="col4">该日志项被写入到日志中的时间</entry>
              </row>
              <row>
                <entry colname="col1">2</entry>
                <entry colname="col2">user_name</entry>
                <entry colname="col3">varchar(100)</entry>
                <entry colname="col4">数据库用户名</entry>
              </row>
              <row>
                <entry colname="col1">3</entry>
                <entry colname="col2">database_name</entry>
                <entry colname="col3">varchar(100)</entry>
                <entry colname="col4">数据库名</entry>
              </row>
              <row>
                <entry colname="col1">4</entry>
                <entry colname="col2">process_id</entry>
                <entry colname="col3">varchar(10)</entry>
                <entry colname="col4">系统进程ID（以"p"为前缀）</entry>
              </row>
              <row>
                <entry colname="col1">5</entry>
                <entry colname="col2">thread_id</entry>
                <entry colname="col3">varchar(50)</entry>
                <entry colname="col4">线程号（以"th"为前缀）</entry>
              </row>
              <row>
                <entry colname="col1">6</entry>
                <entry colname="col2">remote_host</entry>
                <entry colname="col3">varchar(100)</entry>
                <entry colname="col4">在Master上，是客户端机器的主机名/地址。在Segment上，是Master的主机名/地址。</entry>
              </row>
              <row>
                <entry colname="col1">7</entry>
                <entry colname="col2">remote_port</entry>
                <entry colname="col3">varchar(10)</entry>
                <entry colname="col4">Segment或者Master的端口号</entry>
              </row>
              <row>
                <entry colname="col1">8</entry>
                <entry colname="col2">session_start_time</entry>
                <entry colname="col3">timestamp with time zone</entry>
                <entry colname="col4">会话连接被打开的时间</entry>
              </row>
              <row>
                <entry colname="col1">9</entry>
                <entry colname="col2">transaction_id </entry>
                <entry colname="col3">int</entry>
                <entry colname="col4">Master上的顶层事务ID。这个ID是任何子事务的父亲。</entry>
              </row>
              <row>
                <entry colname="col1">10</entry>
                <entry colname="col2">gp_session_id</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">会话标识符号（以"con"为前缀）</entry>
              </row>
              <row>
                <entry colname="col1">11</entry>
                <entry colname="col2">gp_command_count</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">会话中的命令号（以"cmd"为前缀）</entry>
              </row>
              <row>
                <entry colname="col1">12</entry>
                <entry colname="col2">gp_segment</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">Segment内容标识符（主Segment以"seg"为前缀，镜像Segment以"mir"为前缀）。Master的内容ID总是为-1。</entry>
              </row>
              <row>
                <entry colname="col1">13</entry>
                <entry colname="col2">slice_id</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">切片ID（被执行的查询计划的一部分）</entry>
              </row>
              <row>
                <entry colname="col1">14</entry>
                <entry colname="col2">distr_tranx_id</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">分布式事务ID</entry>
              </row>
              <row>
                <entry colname="col1">15</entry>
                <entry colname="col2">local_tranx_id</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">本地事务ID</entry>
              </row>
              <row>
                <entry colname="col1">16</entry>
                <entry colname="col2">sub_tranx_id</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">子事务ID</entry>
              </row>
              <row>
                <entry colname="col1">17</entry>
                <entry colname="col2">event_severity</entry>
                <entry colname="col3">varchar(10)</entry>
                <entry colname="col4">值包括：LOG、ERROR、FATAL、PANIC、DEBUG1、DEBUG2</entry>
              </row>
              <row>
                <entry colname="col1">18</entry>
                <entry colname="col2">sql_state_code</entry>
                <entry colname="col3">varchar(10)</entry>
                <entry colname="col4">与日志消息相关的SQL状态代码</entry>
              </row>
              <row>
                <entry colname="col1">19</entry>
                <entry colname="col2">event_message </entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">日志或者错误消息文本</entry>
              </row>
              <row>
                <entry colname="col1">20</entry>
                <entry colname="col2">event_detail</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">与一个错误或者警告消息相关的详细消息文本</entry>
              </row>
              <row>
                <entry colname="col1">21</entry>
                <entry colname="col2">event_hint</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">与一个错误或者警告消息相关的提示消息文本</entry>
              </row>
              <row>
                <entry colname="col1">22</entry>
                <entry colname="col2">internal_query</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">内部生成的查询文本</entry>
              </row>
              <row>
                <entry colname="col1">23</entry>
                <entry colname="col2">internal_query_pos</entry>
                <entry colname="col3">int</entry>
                <entry colname="col4">内部生成的查询文本的指针式索引</entry>
              </row>
              <row>
                <entry colname="col1">24</entry>
                <entry colname="col2">event_context</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">这个消息产生的上下文</entry>
              </row>
              <row>
                <entry colname="col1">25</entry>
                <entry colname="col2">debug_query_string</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">完整的用户提供的查询字符串，用于调试。内部使用可能会修改这个字符串。</entry>
              </row>
              <row>
                <entry colname="col1">26</entry>
                <entry colname="col2">error_cursor_pos</entry>
                <entry colname="col3">int</entry>
                <entry colname="col4">该查询字符串中的指针式索引</entry>
              </row>
              <row>
                <entry colname="col1">27</entry>
                <entry colname="col2">func_name</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">这个消息产生的函数</entry>
              </row>
              <row>
                <entry colname="col1">28</entry>
                <entry colname="col2">file_name</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">产生该消息的内部代码文件</entry>
              </row>
              <row>
                <entry colname="col1">29</entry>
                <entry colname="col2">file_line</entry>
                <entry colname="col3">int</entry>
                <entry colname="col4">产生该消息的内部代码文件的行号</entry>
              </row>
              <row>
                <entry colname="col1">30</entry>
                <entry colname="col2">stack_trace</entry>
                <entry colname="col3">text</entry>
                <entry colname="col4">与这个消息相关的堆栈跟踪</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </body>
    </topic>
    <topic id="topic30" xml:lang="en">
      <title>搜索Greenplum服务器日志文件</title>
      <body>
        <p>Greenplum数据库提供一个名为<codeph>gplogfilter</codeph>的工具，它可以在一个Greenplum数据库
          日志文件中搜索匹配指定条件的项。默认情况下，这个工具在默认日志位置搜索Greenplum数据库的Master日志。
          例如，要显示Master日志文件的最后三行：
          </p>
        <p>
          <codeblock>$ gplogfilter -n 3
</codeblock>
        </p>
        <p>要同时搜索所有Segment的日志文件，可以通过<codeph>gpssh</codeph>工具来运行<codeph>gplogfilter</codeph>。
          例如，要显示每个Segment日志文件的最后三行：
          </p>
        <p>
          <codeblock>$ gpssh -f seg_host_file
</codeblock>
        </p>
        <codeblock>=&gt; source /usr/local/greenplum-db/greenplum_path.sh
=&gt; gplogfilter -n 3 /gpdata/gp*/pg_log/gpdb*.log</codeblock>
      </body>
    </topic>
  </topic>
  <topic id="topic31" xml:lang="en">
    <title id="kj168900">使用gp_toolkit</title>
    <body>
      <p>使用Greenplum数据库的管理方案<i>gp_toolkit</i>来查询系统目录、日志文件和操作系统环境以得到系统状态信息。
        gp_toolkit方案包含一些可以用SQL命令访问的视图。<i>gp_toolkit</i>方案对所有数据库用户都可以访问。一些对象
        要求超级用户权限。用与下面类似的命令把<i>gp_toolkit</i>方案增加到用户的方案搜索路径中：
      </p>
      <codeblock>=&gt; ALTER ROLE myrole SET search_path TO myschema,gp_toolkit;</codeblock>
      <p>有关可用的管理方案视图及其用法的描述，请见
          <cite>Greenplum Database Reference Guide</cite>.</p>
    </body>
  </topic>
    <topic id="topic_pyh_sqg_kp">
      <title>SQL标准错误代码</title>
      <body>
        <p>下面的表格列出了所有定义好的错误代码。有些没有被用到，但是在SQL标准中有定义。其中也显示了错误分类。
          对于每一种错误分类都有一个标准错误代码，它的最后三个字符为000。这种代码只用于落入该分类却没有更详细
          代码的错误情况。</p>
        <p>每种错误代码的PL/pgSQL情况名称与该表中显示的短语相同，但是把空格替换成下划线。例如，代码22012
          （DIVISION BY ZERO）的情况名称是DIVISION_BY_ZERO。情况名称不区分大小写。</p>
        <note>与error截然不同，PL/pgSQL不识别warning、condition names，warning、error和
          condition names的分类分别为00、01和02。
         </note>
        <table frame="all" id="table_m1k_sqg_kp">
          <title>SQL代码</title>
          <tgroup cols="3">
            <colspec colnum="1" colname="col1" colwidth=".8*"/>
            <colspec colnum="2" colname="col2" colwidth="2.5*"/>
            <colspec colnum="3" colname="col3" colwidth="3*"/>
            <thead>
              <row>
                <entry>错误代码</entry>
                <entry>含义</entry>
                <entry>常量</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 00 </b>— Successful Completion</entry>
              </row>
              <row>
                <entry>00000</entry>
                <entry>SUCCESSFUL COMPLETION</entry>
                <entry>successful_completion</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3">Class 01 — Warning</entry>
              </row>
              <row>
                <entry>01000</entry>
                <entry>WARNING</entry>
                <entry>warning</entry>
              </row>
              <row>
                <entry>0100C</entry>
                <entry>DYNAMIC RESULT SETS RETURNED</entry>
                <entry>dynamic_result_sets_returned</entry>
              </row>
              <row>
                <entry>01008</entry>
                <entry>IMPLICIT ZERO BIT PADDING</entry>
                <entry>implicit_zero_bit_padding</entry>
              </row>
              <row>
                <entry>01003</entry>
                <entry>NULL VALUE ELIMINATED IN SET FUNCTION</entry>
                <entry>null_value_eliminated_in_set_function</entry>
              </row>
              <row>
                <entry>01007</entry>
                <entry>PRIVILEGE NOT GRANTED</entry>
                <entry>privilege_not_granted</entry>
              </row>
              <row>
                <entry>01006</entry>
                <entry>PRIVILEGE NOT REVOKED</entry>
                <entry>privilege_not_revoked</entry>
              </row>
              <row>
                <entry>01004</entry>
                <entry>STRING DATA RIGHT TRUNCATION</entry>
                <entry>string_data_right_truncation</entry>
              </row>
              <row>
                <entry>01P01</entry>
                <entry>DEPRECATED FEATURE</entry>
                <entry>deprecated_feature</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 02</b> — No Data (this is also a
                  warning class per the SQL standard)</entry>
              </row>
              <row>
                <entry>02000</entry>
                <entry>NO DATA</entry>
                <entry>no_data</entry>
              </row>
              <row>
                <entry>02001</entry>
                <entry>NO ADDITIONAL DYNAMIC RESULT SETS RETURNED</entry>
                <entry>no_additional_dynamic_result_sets_returned</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 03</b> — SQL Statement Not Yet
                  Complete</entry>
              </row>
              <row>
                <entry>03000</entry>
                <entry>SQL STATEMENT NOT YET COMPLETE</entry>
                <entry>sql_statement_not_yet_complete</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 08</b> — Connection Exception</entry>
              </row>
              <row>
                <entry>08000</entry>
                <entry>CONNECTION EXCEPTION</entry>
                <entry>connection_exception</entry>
              </row>
              <row>
                <entry>08003</entry>
                <entry>CONNECTION DOES NOT EXIST</entry>
                <entry>connection_does_not_exist</entry>
              </row>
              <row>
                <entry>08006</entry>
                <entry>CONNECTION FAILURE</entry>
                <entry>connection_failure</entry>
              </row>
              <row>
                <entry>08001</entry>
                <entry>SQLCLIENT UNABLE TO ESTABLISH SQLCONNECTION</entry>
                <entry>sqlclient_unable_to_establish_sqlconnection</entry>
              </row>
              <row>
                <entry>08004</entry>
                <entry>SQLSERVER REJECTED ESTABLISHMENT OF SQLCONNECTION</entry>
                <entry>sqlserver_rejected_establishment_of_sqlconnection</entry>
              </row>
              <row>
                <entry>08007</entry>
                <entry>TRANSACTION RESOLUTION UNKNOWN</entry>
                <entry>transaction_resolution_unknown</entry>
              </row>
              <row>
                <entry>08P01</entry>
                <entry>PROTOCOL VIOLATION</entry>
                <entry>protocol_violation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 09</b> — Triggered Action
                  Exception</entry>
              </row>
              <row>
                <entry>09000</entry>
                <entry>TRIGGERED ACTION EXCEPTION</entry>
                <entry>triggered_action_exception</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 0A</b> — Feature Not Supported</entry>
              </row>
              <row>
                <entry>0A000</entry>
                <entry>FEATURE NOT SUPPORTED</entry>
                <entry>feature_not_supported</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 0B</b> — Invalid Transaction
                  Initiation</entry>
              </row>
              <row>
                <entry>0B000</entry>
                <entry>INVALID TRANSACTION INITIATION</entry>
                <entry>invalid_transaction_initiation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 0F</b> — Locator Exception</entry>
              </row>
              <row>
                <entry>0F000</entry>
                <entry>LOCATOR EXCEPTION</entry>
                <entry>locator_exception</entry>
              </row>
              <row>
                <entry>0F001</entry>
                <entry>INVALID LOCATOR SPECIFICATION</entry>
                <entry>invalid_locator_specification</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 0L</b> — Invalid Grantor</entry>
              </row>
              <row>
                <entry>0L000</entry>
                <entry>INVALID GRANTOR</entry>
                <entry>invalid_grantor</entry>
              </row>
              <row>
                <entry>0LP01</entry>
                <entry>INVALID GRANT OPERATION</entry>
                <entry>invalid_grant_operation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 0P</b> — Invalid Role
                  Specification</entry>
              </row>
              <row>
                <entry>0P000</entry>
                <entry>INVALID ROLE SPECIFICATION</entry>
                <entry>invalid_role_specification</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 21</b> — Cardinality Violation</entry>
              </row>
              <row>
                <entry>21000</entry>
                <entry>CARDINALITY VIOLATION</entry>
                <entry>cardinality_violation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 22</b> — Data Exception</entry>
              </row>
              <row>
                <entry>22000</entry>
                <entry>DATA EXCEPTION</entry>
                <entry>data_exception</entry>
              </row>
              <row>
                <entry>2202E</entry>
                <entry>ARRAY SUBSCRIPT ERROR</entry>
                <entry>array_subscript_error</entry>
              </row>
              <row>
                <entry>22021</entry>
                <entry>CHARACTER NOT IN REPERTOIRE</entry>
                <entry>character_not_in_repertoire</entry>
              </row>
              <row>
                <entry>22008</entry>
                <entry>DATETIME FIELD OVERFLOW</entry>
                <entry>datetime_field_overflow</entry>
              </row>
              <row>
                <entry>22012</entry>
                <entry>DIVISION BY ZERO</entry>
                <entry>division_by_zero</entry>
              </row>
              <row>
                <entry>22005</entry>
                <entry>ERROR IN ASSIGNMENT</entry>
                <entry>error_in_assignment</entry>
              </row>
              <row>
                <entry>2200B</entry>
                <entry>ESCAPE CHARACTER CONFLICT</entry>
                <entry>escape_character_conflict</entry>
              </row>
              <row>
                <entry>22022</entry>
                <entry>INDICATOR OVERFLOW</entry>
                <entry>indicator_overflow</entry>
              </row>
              <row>
                <entry>22015</entry>
                <entry>INTERVAL FIELD OVERFLOW</entry>
                <entry>interval_field_overflow</entry>
              </row>
              <row>
                <entry>2201E</entry>
                <entry>INVALID ARGUMENT FOR LOGARITHM</entry>
                <entry>invalid_argument_for_logarithm</entry>
              </row>
              <row>
                <entry>2201F</entry>
                <entry>INVALID ARGUMENT FOR POWER FUNCTION</entry>
                <entry>invalid_argument_for_power_function</entry>
              </row>
              <row>
                <entry>2201G</entry>
                <entry>INVALID ARGUMENT FOR WIDTH BUCKET FUNCTION</entry>
                <entry>invalid_argument_for_width_bucket_function</entry>
              </row>
              <row>
                <entry>22018</entry>
                <entry>INVALID CHARACTER VALUE FOR CAST</entry>
                <entry>invalid_character_value_for_cast</entry>
              </row>
              <row>
                <entry>22007</entry>
                <entry>INVALID DATETIME FORMAT</entry>
                <entry>invalid_datetime_format</entry>
              </row>
              <row>
                <entry>22019</entry>
                <entry>INVALID ESCAPE CHARACTER</entry>
                <entry>invalid_escape_character</entry>
              </row>
              <row>
                <entry>2200D</entry>
                <entry>INVALID ESCAPE OCTET</entry>
                <entry>invalid_escape_octet</entry>
              </row>
              <row>
                <entry>22025</entry>
                <entry>INVALID ESCAPE SEQUENCE</entry>
                <entry>invalid_escape_sequence</entry>
              </row>
              <row>
                <entry>22P06</entry>
                <entry>NONSTANDARD USE OF ESCAPE CHARACTER</entry>
                <entry>nonstandard_use_of_escape_character</entry>
              </row>
              <row>
                <entry>22010</entry>
                <entry>INVALID INDICATOR PARAMETER VALUE</entry>
                <entry>invalid_indicator_parameter_value</entry>
              </row>
              <row>
                <entry>22020</entry>
                <entry>INVALID LIMIT VALUE</entry>
                <entry>invalid_limit_value</entry>
              </row>
              <row>
                <entry>22023</entry>
                <entry>INVALID PARAMETER VALUE</entry>
                <entry>invalid_parameter_value</entry>
              </row>
              <row>
                <entry>2201B</entry>
                <entry>INVALID REGULAR EXPRESSION</entry>
                <entry>invalid_regular_expression</entry>
              </row>
              <row>
                <entry>22009</entry>
                <entry>INVALID TIME ZONE DISPLACEMENT VALUE</entry>
                <entry>invalid_time_zone_displacement_value</entry>
              </row>
              <row>
                <entry>2200C</entry>
                <entry>INVALID USE OF ESCAPE CHARACTER</entry>
                <entry>invalid_use_of_escape_character</entry>
              </row>
              <row>
                <entry>2200G</entry>
                <entry>MOST SPECIFIC TYPE MISMATCH</entry>
                <entry>most_specific_type_mismatch</entry>
              </row>
              <row>
                <entry>22004</entry>
                <entry>NULL VALUE NOT ALLOWED</entry>
                <entry>null_value_not_allowed</entry>
              </row>
              <row>
                <entry>22002</entry>
                <entry>NULL VALUE NO INDICATOR PARAMETER</entry>
                <entry>null_value_no_indicator_parameter</entry>
              </row>
              <row>
                <entry>22003</entry>
                <entry>NUMERIC VALUE OUT OF RANGE</entry>
                <entry>numeric_value_out_of_range</entry>
              </row>
              <row>
                <entry>22026</entry>
                <entry>STRING DATA LENGTH MISMATCH</entry>
                <entry>string_data_length_mismatch</entry>
              </row>
              <row>
                <entry>22001</entry>
                <entry>STRING DATA RIGHT TRUNCATION</entry>
                <entry>string_data_right_truncation</entry>
              </row>
              <row>
                <entry>22011</entry>
                <entry>SUBSTRING ERROR</entry>
                <entry>substring_error</entry>
              </row>
              <row>
                <entry>22027</entry>
                <entry>TRIM ERROR</entry>
                <entry>trim_error</entry>
              </row>
              <row>
                <entry>22024</entry>
                <entry>UNTERMINATED C STRING</entry>
                <entry>unterminated_c_string</entry>
              </row>
              <row>
                <entry>2200F</entry>
                <entry>ZERO LENGTH CHARACTER STRING</entry>
                <entry>zero_length_character_string</entry>
              </row>
              <row>
                <entry>22P01</entry>
                <entry>FLOATING POINT EXCEPTION</entry>
                <entry>floating_point_exception</entry>
              </row>
              <row>
                <entry>22P02</entry>
                <entry>INVALID TEXT REPRESENTATION</entry>
                <entry>invalid_text_representation</entry>
              </row>
              <row>
                <entry>22P03</entry>
                <entry>INVALID BINARY REPRESENTATION</entry>
                <entry>invalid_binary_representation</entry>
              </row>
              <row>
                <entry>22P04</entry>
                <entry>BAD COPY FILE FORMAT</entry>
                <entry>bad_copy_file_format</entry>
              </row>
              <row>
                <entry>22P05</entry>
                <entry>UNTRANSLATABLE CHARACTER</entry>
                <entry>untranslatable_character</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 23</b> — Integrity Constraint
                  Violation</entry>
              </row>
              <row>
                <entry>23000</entry>
                <entry>INTEGRITY CONSTRAINT VIOLATION</entry>
                <entry>integrity_constraint_violation</entry>
              </row>
              <row>
                <entry>23001</entry>
                <entry>RESTRICT VIOLATION</entry>
                <entry>restrict_violation</entry>
              </row>
              <row>
                <entry>23502</entry>
                <entry>NOT NULL VIOLATION</entry>
                <entry>not_null_violation</entry>
              </row>
              <row>
                <entry>23503</entry>
                <entry>FOREIGN KEY VIOLATION</entry>
                <entry>foreign_key_violation</entry>
              </row>
              <row>
                <entry>23505</entry>
                <entry>UNIQUE VIOLATION</entry>
                <entry>unique_violation</entry>
              </row>
              <row>
                <entry>23514</entry>
                <entry>CHECK VIOLATION</entry>
                <entry>check_violation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 24</b> — Invalid Cursor State</entry>
              </row>
              <row>
                <entry>24000</entry>
                <entry>INVALID CURSOR STATE</entry>
                <entry>invalid_cursor_state</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 25</b> — Invalid Transaction
                  State</entry>
              </row>
              <row>
                <entry>25000</entry>
                <entry>INVALID TRANSACTION STATE</entry>
                <entry>invalid_transaction_state</entry>
              </row>
              <row>
                <entry>25001</entry>
                <entry>ACTIVE SQL TRANSACTION</entry>
                <entry>active_sql_transaction</entry>
              </row>
              <row>
                <entry>25002</entry>
                <entry>BRANCH TRANSACTION ALREADY ACTIVE</entry>
                <entry>branch_transaction_already_active</entry>
              </row>
              <row>
                <entry>25008</entry>
                <entry>HELD CURSOR REQUIRES SAME ISOLATION LEVEL</entry>
                <entry>held_cursor_requires_same_isolation_level</entry>
              </row>
              <row>
                <entry>25003</entry>
                <entry>INAPPROPRIATE ACCESS MODE FOR BRANCH TRANSACTION</entry>
                <entry>inappropriate_access_mode_for_branch_transaction</entry>
              </row>
              <row>
                <entry>25004</entry>
                <entry>INAPPROPRIATE ISOLATION LEVEL FOR BRANCH TRANSACTION</entry>
                <entry>inappropriate_isolation_level_for_branch_transaction</entry>
              </row>
              <row>
                <entry>25005</entry>
                <entry>NO ACTIVE SQL TRANSACTION FOR BRANCH TRANSACTION</entry>
                <entry>no_active_sql_transaction_for_branch_transaction</entry>
              </row>
              <row>
                <entry>25006</entry>
                <entry>READ ONLY SQL TRANSACTION</entry>
                <entry>read_only_sql_transaction</entry>
              </row>
              <row>
                <entry>25007</entry>
                <entry>SCHEMA AND DATA STATEMENT MIXING NOT SUPPORTED</entry>
                <entry>schema_and_data_statement_mixing_not_supported</entry>
              </row>
              <row>
                <entry>25P01</entry>
                <entry>NO ACTIVE SQL TRANSACTION</entry>
                <entry>no_active_sql_transaction</entry>
              </row>
              <row>
                <entry>25P02</entry>
                <entry>IN FAILED SQL TRANSACTION</entry>
                <entry>in_failed_sql_transaction</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 26</b> — Invalid SQL Statement
                  Name</entry>
              </row>
              <row>
                <entry>26000</entry>
                <entry>INVALID SQL STATEMENT NAME</entry>
                <entry>invalid_sql_statement_name</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 27</b> — Triggered Data Change
                  Violation</entry>
              </row>
              <row>
                <entry>27000</entry>
                <entry>TRIGGERED DATA CHANGE VIOLATION</entry>
                <entry>triggered_data_change_violation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 28</b> — Invalid Authorization
                  Specification</entry>
              </row>
              <row>
                <entry>28000</entry>
                <entry>INVALID AUTHORIZATION SPECIFICATION</entry>
                <entry>invalid_authorization_specification</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 2B</b> — Dependent Privilege
                  Descriptors Still Exist</entry>
              </row>
              <row>
                <entry>2B000</entry>
                <entry>DEPENDENT PRIVILEGE DESCRIPTORS STILL EXIST</entry>
                <entry>dependent_privilege_descriptors_still_exist</entry>
              </row>
              <row>
                <entry>2BP01</entry>
                <entry>DEPENDENT OBJECTS STILL EXIST</entry>
                <entry>dependent_objects_still_exist</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 2D</b> — Invalid Transaction
                  Termination</entry>
              </row>
              <row>
                <entry>2D000</entry>
                <entry>INVALID TRANSACTION TERMINATION</entry>
                <entry>invalid_transaction_termination</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 2F</b> — SQL Routine Exception</entry>
              </row>
              <row>
                <entry>2F000</entry>
                <entry>SQL ROUTINE EXCEPTION</entry>
                <entry>sql_routine_exception</entry>
              </row>
              <row>
                <entry>2F005</entry>
                <entry>FUNCTION EXECUTED NO RETURN STATEMENT</entry>
                <entry>function_executed_no_return_statement</entry>
              </row>
              <row>
                <entry>2F002</entry>
                <entry>MODIFYING SQL DATA NOT PERMITTED</entry>
                <entry>modifying_sql_data_not_permitted</entry>
              </row>
              <row>
                <entry>2F003</entry>
                <entry>PROHIBITED SQL STATEMENT ATTEMPTED</entry>
                <entry>prohibited_sql_statement_attempted</entry>
              </row>
              <row>
                <entry>2F004</entry>
                <entry>READING SQL DATA NOT PERMITTED</entry>
                <entry>reading_sql_data_not_permitted</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 34</b> — Invalid Cursor Name</entry>
              </row>
              <row>
                <entry>34000</entry>
                <entry>INVALID CURSOR NAME</entry>
                <entry>invalid_cursor_name</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 38</b> — External Routine
                  Exception</entry>
              </row>
              <row>
                <entry>38000</entry>
                <entry>EXTERNAL ROUTINE EXCEPTION</entry>
                <entry>external_routine_exception</entry>
              </row>
              <row>
                <entry>38001</entry>
                <entry>CONTAINING SQL NOT PERMITTED</entry>
                <entry>containing_sql_not_permitted</entry>
              </row>
              <row>
                <entry>38002</entry>
                <entry>MODIFYING SQL DATA NOT PERMITTED</entry>
                <entry>modifying_sql_data_not_permitted</entry>
              </row>
              <row>
                <entry>38003</entry>
                <entry>PROHIBITED SQL STATEMENT ATTEMPTED</entry>
                <entry>prohibited_sql_statement_attempted</entry>
              </row>
              <row>
                <entry>38004</entry>
                <entry>READING SQL DATA NOT PERMITTED</entry>
                <entry>reading_sql_data_not_permitted</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 39</b> — External Routine Invocation
                  Exception</entry>
              </row>
              <row>
                <entry>39000</entry>
                <entry>EXTERNAL ROUTINE INVOCATION EXCEPTION</entry>
                <entry>external_routine_invocation_exception</entry>
              </row>
              <row>
                <entry>39001</entry>
                <entry>INVALID SQLSTATE RETURNED</entry>
                <entry>invalid_sqlstate_returned</entry>
              </row>
              <row>
                <entry>39004</entry>
                <entry>NULL VALUE NOT ALLOWED</entry>
                <entry>null_value_not_allowed</entry>
              </row>
              <row>
                <entry>39P01</entry>
                <entry>TRIGGER PROTOCOL VIOLATED</entry>
                <entry>trigger_protocol_violated</entry>
              </row>
              <row>
                <entry>39P02</entry>
                <entry>SRF PROTOCOL VIOLATED</entry>
                <entry>srf_protocol_violated</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 3B</b> — Savepoint Exception</entry>
              </row>
              <row>
                <entry>3B000</entry>
                <entry>SAVEPOINT EXCEPTION</entry>
                <entry>savepoint_exception</entry>
              </row>
              <row>
                <entry>3B001</entry>
                <entry>INVALID SAVEPOINT SPECIFICATION</entry>
                <entry>invalid_savepoint_specification</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 3D</b> — Invalid Catalog Name</entry>
              </row>
              <row>
                <entry>3D000</entry>
                <entry>INVALID CATALOG NAME</entry>
                <entry>invalid_catalog_name</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 3F</b> — Invalid Schema Name</entry>
              </row>
              <row>
                <entry>3F000</entry>
                <entry>INVALID SCHEMA NAME</entry>
                <entry>invalid_schema_name</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 40</b> — Transaction Rollback</entry>
              </row>
              <row>
                <entry>40000</entry>
                <entry>TRANSACTION ROLLBACK</entry>
                <entry>transaction_rollback</entry>
              </row>
              <row>
                <entry>40002</entry>
                <entry>TRANSACTION INTEGRITY CONSTRAINT VIOLATION</entry>
                <entry>transaction_integrity_constraint_violation</entry>
              </row>
              <row>
                <entry>40001</entry>
                <entry>SERIALIZATION FAILURE</entry>
                <entry>serialization_failure</entry>
              </row>
              <row>
                <entry>40003</entry>
                <entry>STATEMENT COMPLETION UNKNOWN</entry>
                <entry>statement_completion_unknown</entry>
              </row>
              <row>
                <entry>40P01</entry>
                <entry>DEADLOCK DETECTED</entry>
                <entry>deadlock_detected</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 42</b> — Syntax Error or Access Rule
                  Violation</entry>
              </row>
              <row>
                <entry>42000</entry>
                <entry>SYNTAX ERROR OR ACCESS RULE VIOLATION</entry>
                <entry>syntax_error_or_access_rule_violation</entry>
              </row>
              <row>
                <entry>42601</entry>
                <entry>SYNTAX ERROR</entry>
                <entry>syntax_error</entry>
              </row>
              <row>
                <entry>42501</entry>
                <entry>INSUFFICIENT PRIVILEGE</entry>
                <entry>insufficient_privilege</entry>
              </row>
              <row>
                <entry>42846</entry>
                <entry>CANNOT COERCE</entry>
                <entry>cannot_coerce</entry>
              </row>
              <row>
                <entry>42803</entry>
                <entry>GROUPING ERROR</entry>
                <entry>grouping_error</entry>
              </row>
              <row>
                <entry>42830</entry>
                <entry>INVALID FOREIGN KEY</entry>
                <entry>invalid_foreign_key</entry>
              </row>
              <row>
                <entry>42602</entry>
                <entry>INVALID NAME</entry>
                <entry>invalid_name</entry>
              </row>
              <row>
                <entry>42622</entry>
                <entry>NAME TOO LONG</entry>
                <entry>name_too_long</entry>
              </row>
              <row>
                <entry>42939</entry>
                <entry>RESERVED NAME</entry>
                <entry>reserved_name</entry>
              </row>
              <row>
                <entry>42804</entry>
                <entry>DATATYPE MISMATCH</entry>
                <entry>datatype_mismatch</entry>
              </row>
              <row>
                <entry>42P18</entry>
                <entry>INDETERMINATE DATATYPE</entry>
                <entry>indeterminate_datatype</entry>
              </row>
              <row>
                <entry>42809</entry>
                <entry>WRONG OBJECT TYPE</entry>
                <entry>wrong_object_type</entry>
              </row>
              <row>
                <entry>42703</entry>
                <entry>UNDEFINED COLUMN</entry>
                <entry>undefined_column</entry>
              </row>
              <row>
                <entry>42883</entry>
                <entry>UNDEFINED FUNCTION</entry>
                <entry>undefined_function</entry>
              </row>
              <row>
                <entry>42P01</entry>
                <entry>UNDEFINED TABLE</entry>
                <entry>undefined_table</entry>
              </row>
              <row>
                <entry>42P02</entry>
                <entry>UNDEFINED PARAMETER</entry>
                <entry>undefined_parameter</entry>
              </row>
              <row>
                <entry>42704</entry>
                <entry>UNDEFINED OBJECT</entry>
                <entry>undefined_object</entry>
              </row>
              <row>
                <entry>42701</entry>
                <entry>DUPLICATE COLUMN</entry>
                <entry>duplicate_column</entry>
              </row>
              <row>
                <entry>42P03</entry>
                <entry>DUPLICATE CURSOR</entry>
                <entry>duplicate_cursor</entry>
              </row>
              <row>
                <entry>42P04</entry>
                <entry>DUPLICATE DATABASE</entry>
                <entry>duplicate_database</entry>
              </row>
              <row>
                <entry>42723</entry>
                <entry>DUPLICATE FUNCTION</entry>
                <entry>duplicate_function</entry>
              </row>
              <row>
                <entry>42P05</entry>
                <entry>DUPLICATE PREPARED STATEMENT</entry>
                <entry>duplicate_prepared_statement</entry>
              </row>
              <row>
                <entry>42P06</entry>
                <entry>DUPLICATE SCHEMA</entry>
                <entry>duplicate_schema</entry>
              </row>
              <row>
                <entry>42P07</entry>
                <entry>DUPLICATE TABLE</entry>
                <entry>duplicate_table</entry>
              </row>
              <row>
                <entry>42712</entry>
                <entry>DUPLICATE ALIAS</entry>
                <entry>duplicate_alias</entry>
              </row>
              <row>
                <entry>42710</entry>
                <entry>DUPLICATE OBJECT</entry>
                <entry>duplicate_object</entry>
              </row>
              <row>
                <entry>42702</entry>
                <entry>AMBIGUOUS COLUMN</entry>
                <entry>ambiguous_column</entry>
              </row>
              <row>
                <entry>42725</entry>
                <entry>AMBIGUOUS FUNCTION</entry>
                <entry>ambiguous_function</entry>
              </row>
              <row>
                <entry>42P08</entry>
                <entry>AMBIGUOUS PARAMETER</entry>
                <entry>ambiguous_parameter</entry>
              </row>
              <row>
                <entry>42P09</entry>
                <entry>AMBIGUOUS ALIAS</entry>
                <entry>ambiguous_alias</entry>
              </row>
              <row>
                <entry>42P10</entry>
                <entry>INVALID COLUMN REFERENCE</entry>
                <entry>invalid_column_reference</entry>
              </row>
              <row>
                <entry>42611</entry>
                <entry>INVALID COLUMN DEFINITION</entry>
                <entry>invalid_column_definition</entry>
              </row>
              <row>
                <entry>42P11</entry>
                <entry>INVALID CURSOR DEFINITION</entry>
                <entry>invalid_cursor_definition</entry>
              </row>
              <row>
                <entry>42P12</entry>
                <entry>INVALID DATABASE DEFINITION</entry>
                <entry>invalid_database_definition</entry>
              </row>
              <row>
                <entry>42P13</entry>
                <entry>INVALID FUNCTION DEFINITION</entry>
                <entry>invalid_function_definition</entry>
              </row>
              <row>
                <entry>42P14</entry>
                <entry>INVALID PREPARED STATEMENT DEFINITION</entry>
                <entry>invalid_prepared_statement_definition</entry>
              </row>
              <row>
                <entry>42P15</entry>
                <entry>INVALID SCHEMA DEFINITION</entry>
                <entry>invalid_schema_definition</entry>
              </row>
              <row>
                <entry>42P16</entry>
                <entry>INVALID TABLE DEFINITION</entry>
                <entry>invalid_table_definition</entry>
              </row>
              <row>
                <entry>42P17</entry>
                <entry>INVALID OBJECT DEFINITION</entry>
                <entry>invalid_object_definition</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 44</b> — WITH CHECK OPTION
                  Violation</entry>
              </row>
              <row>
                <entry>44000</entry>
                <entry>WITH CHECK OPTION VIOLATION</entry>
                <entry>with_check_option_violation</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 53</b> — Insufficient Resources</entry>
              </row>
              <row>
                <entry>53000</entry>
                <entry>INSUFFICIENT RESOURCES</entry>
                <entry>insufficient_resources</entry>
              </row>
              <row>
                <entry>53100</entry>
                <entry>DISK FULL</entry>
                <entry>disk_full</entry>
              </row>
              <row>
                <entry>53200</entry>
                <entry>OUT OF MEMORY</entry>
                <entry>out_of_memory</entry>
              </row>
              <row>
                <entry>53300</entry>
                <entry>TOO MANY CONNECTIONS</entry>
                <entry>too_many_connections</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 54</b> — Program Limit Exceeded</entry>
              </row>
              <row>
                <entry>54000</entry>
                <entry>PROGRAM LIMIT EXCEEDED</entry>
                <entry>program_limit_exceeded</entry>
              </row>
              <row>
                <entry>54001</entry>
                <entry>STATEMENT TOO COMPLEX</entry>
                <entry>statement_too_complex</entry>
              </row>
              <row>
                <entry>54011</entry>
                <entry>TOO MANY COLUMNS</entry>
                <entry>too_many_columns</entry>
              </row>
              <row>
                <entry>54023</entry>
                <entry>TOO MANY ARGUMENTS</entry>
                <entry>too_many_arguments</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 55</b> — Object Not In Prerequisite
                  State</entry>
              </row>
              <row>
                <entry>55000</entry>
                <entry>OBJECT NOT IN PREREQUISITE STATE</entry>
                <entry>object_not_in_prerequisite_state</entry>
              </row>
              <row>
                <entry>55006</entry>
                <entry>OBJECT IN USE</entry>
                <entry>object_in_use</entry>
              </row>
              <row>
                <entry>55P02</entry>
                <entry>CANT CHANGE RUNTIME PARAM</entry>
                <entry>cant_change_runtime_param</entry>
              </row>
              <row>
                <entry>55P03</entry>
                <entry>LOCK NOT AVAILABLE</entry>
                <entry>lock_not_available</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 57</b> — Operator Intervention</entry>
              </row>
              <row>
                <entry>57000</entry>
                <entry>OPERATOR INTERVENTION</entry>
                <entry>operator_intervention</entry>
              </row>
              <row>
                <entry>57014</entry>
                <entry>QUERY CANCELED</entry>
                <entry>query_canceled</entry>
              </row>
              <row>
                <entry>57P01</entry>
                <entry>ADMIN SHUTDOWN</entry>
                <entry>admin_shutdown</entry>
              </row>
              <row>
                <entry>57P02</entry>
                <entry>CRASH SHUTDOWN</entry>
                <entry>crash_shutdown</entry>
              </row>
              <row>
                <entry>57P03</entry>
                <entry>CANNOT CONNECT NOW</entry>
                <entry>cannot_connect_now</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class 58</b> — System Error (errors external
                  to Greenplum Database )</entry>
              </row>
              <row>
                <entry>58030</entry>
                <entry>IO ERROR</entry>
                <entry>io_error</entry>
              </row>
              <row>
                <entry>58P01</entry>
                <entry>UNDEFINED FILE</entry>
                <entry>undefined_file</entry>
              </row>
              <row>
                <entry>58P02</entry>
                <entry>DUPLICATE FILE</entry>
                <entry>duplicate_file</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3">Class F0 — Configuration File Error</entry>
              </row>
              <row>
                <entry>F0000</entry>
                <entry>CONFIG FILE ERROR</entry>
                <entry>config_file_error</entry>
              </row>
              <row>
                <entry>F0001</entry>
                <entry>LOCK FILE EXISTS</entry>
                <entry>lock_file_exists</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class P0</b> — PL/pgSQL Error</entry>
              </row>
              <row>
                <entry>P0000</entry>
                <entry>PLPGSQL ERROR</entry>
                <entry>plpgsql_error</entry>
              </row>
              <row>
                <entry>P0001</entry>
                <entry>RAISE EXCEPTION</entry>
                <entry>raise_exception</entry>
              </row>
              <row>
                <entry>P0002</entry>
                <entry>NO DATA FOUND</entry>
                <entry>no_data_found</entry>
              </row>
              <row>
                <entry>P0003</entry>
                <entry>TOO MANY ROWS</entry>
                <entry>too_many_rows</entry>
              </row>
              <row>
                <entry namest="col1" nameend="col3"><b>Class XX</b> — Internal Error</entry>
              </row>
              <row>
                <entry>XX000</entry>
                <entry>INTERNAL ERROR</entry>
                <entry>internal_error</entry>
              </row>
              <row>
                <entry>XX001</entry>
                <entry>DATA CORRUPTED</entry>
                <entry>data_corrupted</entry>
              </row>
              <row>
                <entry>XX002</entry>
                <entry>INDEX CORRUPTED</entry>
                <entry>index_corrupted</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </body>
    </topic>
  </topic>

